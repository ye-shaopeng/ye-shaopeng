/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var p=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var b=Object.getOwnPropertyNames;var w=Object.prototype.hasOwnProperty;var k=(r,l)=>{for(var e in l)p(r,e,{get:l[e],enumerable:!0})},v=(r,l,e,i)=>{if(l&&typeof l=="object"||typeof l=="function")for(let t of b(l))!w.call(r,t)&&t!==e&&p(r,t,{get:()=>l[t],enumerable:!(i=m(l,t))||i.enumerable});return r};var y=r=>v(p({},"__esModule",{value:!0}),r);var B={};k(B,{default:()=>g});module.exports=y(B);var n=require("obsidian"),f={bookmarks:[]},g=class extends n.Plugin{async onload(){await this.loadSettings(),this.addSettingTab(new u(this.app,this)),this.setupBookmarks()}setupBookmarks(){this.clearBookmarks(),this.settings.bookmarks.forEach((e,i)=>{let t=e.lucide||"bookmark";e.command&&this.addCommand({id:`open-webviewer-bookmark-${i}`,name:`Open Web viewer Bookmark: ${this.getDisplayName(e)}`,icon:t,callback:()=>{this.openBookmark(e)}}),e.ribbon&&this.addRibbonIcon(t,`Open ${this.getDisplayName(e)}`,o=>{o.button===1||e.newTab?this.openBookmark(e,!0):this.openBookmark(e,!1)})})}clearBookmarks(){}getDisplayName(e){if(e.title!==""&&e.title!==void 0)return e.title;try{return new URL(e.url).hostname}catch(i){return e.url}}openBookmark(e,i=!1){let o=this.app.internalPlugins.getPluginById("webviewer");if(!o||!o.enabled){new n.Notice("Web viewer plugin is not enabled"),console.error("Web viewer plugin is not enabled");return}let c=i||e.newTab,d=e.url,s=/{{\s*selection\s*}}/g;if(s.test(d)){let a=this.getSelectionFromWebViewer(),h=a&&a.trim()!==""?encodeURIComponent(a.trim()):"";d=d.replace(s,h)}this.app.internalPlugins.getEnabledPluginById("webviewer").openUrl(d,c)}getSelectionFromWebViewer(){try{let e=this.app.workspace.getActiveViewOfType(n.MarkdownView);return e&&e.editor?e.editor.getSelection():void 0}catch(e){console.error("Error while attempting to retrieve selection via MarkdownView",e);return}}async loadSettings(){this.settings=Object.assign({},f,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}async reloadApp(){this.app.commands.executeCommandById("app:reload")}},u=class extends n.PluginSettingTab{constructor(e,i){super(e,i);this.plugin=i}display(){let{containerEl:e}=this;e.empty(),new n.Setting(e).setDesc("Manage your bookmarks for the Web viewer plugin").addButton(t=>{t.setButtonText("Add bookmark").setCta().onClick(()=>{this.plugin.settings.bookmarks.push({url:"https://",title:"",ribbon:!1,command:!0,newTab:!1,lucide:"bookmark"}),this.plugin.saveSettings(),this.display()})});let i=e.createEl("div",{cls:"setting-item-description"});i.createSpan({text:"For icons, enter Lucide icon names. Find all available icons at: "}),i.createEl("a",{text:"Lucide Icons",href:"https://lucide.dev/icons"}),i.createEl("p",{text:"Obsidian uses Lucide icons by default. Example icon names: bookmark, globe, link, heart, external-link"}),this.plugin.settings.bookmarks.forEach((t,o)=>{let c=e.createDiv({cls:"bookmark-container"}),d=c.createDiv({cls:"bookmark-header-div"});d.createEl("h3",{text:`Bookmark: ${this.plugin.getDisplayName(t)}`,cls:"bookmark-header"}),d.createEl("button",{cls:"mod-warning",text:"Remove"}).addEventListener("click",async s=>{this.plugin.settings.bookmarks.splice(o,1),await this.plugin.saveSettings(),this.display()}),new n.Setting(c).setName("URL").setDesc("The website address to open in Web viewer").addText(s=>{s.setPlaceholder("https://").setValue(t.url).onChange(async a=>{this.plugin.settings.bookmarks[o].url=a,await this.plugin.saveSettings()})}),new n.Setting(c).setName("Title (optional)").setDesc("This will be displayed for the command and on hover for the ribbon").addText(s=>{s.setPlaceholder("").setValue(t.title).onChange(async a=>{this.plugin.settings.bookmarks[o].title=a,await this.plugin.saveSettings()})}),new n.Setting(c).setName("Icon").setDesc("Lucide icon name to display in the ribbon").addText(s=>{s.setPlaceholder("bookmark").setValue(t.lucide).onChange(async a=>{this.plugin.settings.bookmarks[o].lucide=a,await this.plugin.saveSettings()})}),new n.Setting(c).setName("Show in ribbon").setDesc("Display this bookmark as an icon in the ribbon").addToggle(s=>{s.setValue(t.ribbon).onChange(async a=>{this.plugin.settings.bookmarks[o].ribbon=a,await this.plugin.saveSettings()})}),new n.Setting(c).setName("Create command").setDesc("Create a command to open this bookmark").addToggle(s=>{s.setValue(t.command).onChange(async a=>{this.plugin.settings.bookmarks[o].command=a,await this.plugin.saveSettings()})}),new n.Setting(c).setName("Open in new tab").setDesc("Open this bookmark in a new tab by default").addToggle(s=>{s.setValue(t.newTab).onChange(async a=>{this.plugin.settings.bookmarks[o].newTab=a,await this.plugin.saveSettings()})})}),new n.Setting(e).setName("Reload app").setDesc("Reload Obsidian for changes to ribbons").addButton(t=>{t.setButtonText("Reload").setCta().onClick(()=>this.plugin.reloadApp())})}};

/* nosourcemap */